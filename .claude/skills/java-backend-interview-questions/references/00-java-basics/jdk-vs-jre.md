# JDK 和 JRE 有什么区别？

## 核心概念

```
┌─────────────────────────────────────────────────────────────┐
│                    JDK vs JRE vs JVM                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────────────────────────────────────────────────┐  │
│   │                        JDK                           │  │
│   │           (Java Development Kit)                     │  │
│   │                                                     │  │
│   │  ┌───────────────────────────────────────────────┐ │  │
│   │  │                    JRE                         │ │  │
│   │  │          (Java Runtime Environment)            │ │  │
│   │  │                                               │ │  │
│   │  │  ┌─────────────────────────────────────────┐ │ │  │
│   │  │  │               JVM                        │ │ │  │
│   │  │  │      (Java Virtual Machine)              │ │ │  │
│   │  │  │                                         │ │ │  │
│   │  │  │  • 类加载器                              │ │ │  │
│   │  │  │  • 运行时数据区                          │ │ │  │
│   │  │  │  • 执行引擎                              │ │ │  │
│   │  │  │  • 垃圾收集器                            │ │ │  │
│   │  │  │                                         │ │ │  │
│   │  │  └─────────────────────────────────────────┘ │ │  │
│   │  │                                               │ │  │
│   │  │  + 核心类库 (rt.jar)                          │ │  │
│   │  │  + 扩展类库                                   │ │  │
│   │  │                                               │ │  │
│   │  └───────────────────────────────────────────────┘ │  │
│   │                                                     │  │
│   │  + 开发工具 (javac, jar, javadoc, jdb...)          │  │
│   │  + 调试工具 (jstack, jmap, jstat, jconsole...)     │  │
│   │                                                     │  │
│   └─────────────────────────────────────────────────────┘  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 详细说明

```
┌─────────────────────────────────────────────────────────────┐
│                    三者详细对比                              │
├────────────┬────────────────────────────────────────────────┤
│            │   说明                                         │
├────────────┼────────────────────────────────────────────────┤
│   JVM      │ Java 虚拟机                                    │
│            │ • 执行字节码                                   │
│            │ • 内存管理、GC                                 │
│            │ • 平台相关（不同 OS 有不同 JVM 实现）          │
│            │                                                │
│   JRE      │ Java 运行时环境                                │
│            │ • JVM + 核心类库                               │
│            │ • 只能运行 Java 程序                           │
│            │ • 不能开发（没有编译器）                       │
│            │                                                │
│   JDK      │ Java 开发工具包                                │
│            │ • JRE + 开发工具                               │
│            │ • 编译、调试、打包                             │
│            │ • 开发者必须安装                               │
└────────────┴────────────────────────────────────────────────┘
```

## JDK 包含的工具

```
┌─────────────────────────────────────────────────────────────┐
│                    JDK 开发工具                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   编译与打包:                                                │
│   ├── javac    编译器 (.java → .class)                      │
│   ├── jar      打包工具 (创建 JAR 文件)                     │
│   ├── javadoc  文档生成工具                                 │
│   └── jlink    模块链接器 (Java 9+)                         │
│                                                             │
│   调试与诊断:                                                │
│   ├── jdb      调试器                                       │
│   ├── jstack   线程堆栈跟踪                                 │
│   ├── jmap     内存映射                                     │
│   ├── jstat    GC 统计                                      │
│   ├── jconsole JMX 监控工具                                 │
│   ├── jvisualvm 可视化监控                                  │
│   └── jhsdb    HotSpot 调试器 (Java 9+)                     │
│                                                             │
│   其他工具:                                                  │
│   ├── jps      Java 进程状态                                │
│   ├── jinfo    配置信息                                     │
│   ├── jhat     堆分析 (已弃用)                              │
│   ├── jcmd     诊断命令                                     │
│   └── jfr      飞行记录器                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## Java 9+ 模块化后的变化

```
┌─────────────────────────────────────────────────────────────┐
│                    Java 9+ 变化                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   Java 8 及之前:                                             │
│   • JRE 可以单独下载                                        │
│   • JDK = JRE + 开发工具                                    │
│                                                             │
│   Java 9+ (模块化):                                          │
│   • 不再单独提供 JRE                                        │
│   • JDK 包含完整运行环境                                    │
│   • 可用 jlink 创建自定义运行时                             │
│                                                             │
│   jlink 示例:                                                │
│   ┌─────────────────────────────────────────────────────┐  │
│   │  # 创建只包含必要模块的最小 JRE                      │  │
│   │  jlink --module-path jmods \                         │  │
│   │        --add-modules java.base \                     │  │
│   │        --output custom-jre                           │  │
│   └─────────────────────────────────────────────────────┘  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 选择指南

```
┌─────────────────────────────────────────────────────────────┐
│                    使用场景                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   开发环境:                                                  │
│   └── 安装 JDK (需要编译、调试)                             │
│                                                             │
│   生产环境 (Java 8):                                         │
│   └── 可以只安装 JRE (只需运行)                             │
│                                                             │
│   生产环境 (Java 9+):                                        │
│   ├── 安装完整 JDK                                          │
│   └── 或用 jlink 创建定制运行时                             │
│                                                             │
│   容器化部署:                                                │
│   ├── 基础镜像: openjdk:17-jdk 或 eclipse-temurin           │
│   └── 精简镜像: 使用 jlink 或 distroless                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 面试回答

### 30秒版本

> **JVM** 是 Java 虚拟机，执行字节码，负责内存管理和 GC。**JRE** 是运行时环境，包含 JVM + 核心类库，只能运行 Java 程序。**JDK** 是开发工具包，包含 JRE + 开发工具（javac、jar、jstack、jmap 等），开发者必须安装 JDK。Java 9+ 不再单独提供 JRE，可用 jlink 创建自定义运行时。

### 1分钟版本

> **JVM**：
> - Java 虚拟机
> - 执行字节码
> - 内存管理、GC
> - 平台相关
>
> **JRE**：
> - JVM + 核心类库
> - 只运行不开发
> - Java 8 可单独安装
>
> **JDK**：
> - JRE + 开发工具
> - javac 编译、jar 打包
> - jstack/jmap/jstat 诊断
> - jconsole/jvisualvm 监控
>
> **Java 9+ 变化**：
> - 不再单独提供 JRE
> - jlink 创建定制运行时
> - 模块化系统
>
> **使用**：
> - 开发：JDK
> - 生产：JDK 或 jlink 定制

---

*关联文档：[jdk-tools.md](jdk-tools.md) | [jvm-components.md](../11-jvm/jvm-components.md)*
