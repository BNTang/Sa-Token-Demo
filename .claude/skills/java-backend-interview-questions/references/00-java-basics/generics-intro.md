# Java 泛型的作用是什么？

## 泛型概述

```
┌─────────────────────────────────────────────────────────────┐
│                    Java 泛型 (Generics)                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   定义: 参数化类型，将类型作为参数传递                      │
│                                                             │
│   作用:                                                      │
│   1. 类型安全: 编译时检查类型                               │
│   2. 消除强制转换: 无需手动类型转换                         │
│   3. 代码复用: 一套代码处理多种类型                         │
│                                                             │
│   引入版本: Java 5 (2004)                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 没有泛型的问题

```java
// Java 5 之前，集合没有泛型
List list = new ArrayList();
list.add("hello");
list.add(123);          // 可以放任何类型

// 取出时需要强制转换
String s1 = (String) list.get(0);  // OK
String s2 = (String) list.get(1);  // 运行时 ClassCastException!

// 问题:
// 1. 类型不安全，编译不报错
// 2. 运行时才发现错误
// 3. 需要手动强制转换
```

## 使用泛型

```java
// 有了泛型
List<String> list = new ArrayList<>();
list.add("hello");
list.add(123);          // 编译错误! 类型安全

// 取出时无需转换
String s1 = list.get(0);  // 自动类型推断

// 好处:
// 1. 类型安全，编译时检查
// 2. 无需强制转换
// 3. 代码更简洁
```

## 泛型的使用形式

```java
// 1. 泛型类
public class Box<T> {
    private T item;
    
    public void set(T item) { this.item = item; }
    public T get() { return item; }
}

Box<String> stringBox = new Box<>();
stringBox.set("hello");
String s = stringBox.get();  // 无需转换

// 2. 泛型接口
public interface Comparable<T> {
    int compareTo(T o);
}

// 3. 泛型方法
public <T> T getFirst(List<T> list) {
    return list.isEmpty() ? null : list.get(0);
}

// 调用
String first = getFirst(Arrays.asList("a", "b"));  // 类型推断
```

## 泛型命名约定

```
┌─────────────────────────────────────────────────────────────┐
│                    泛型命名约定                              │
├──────────────┬──────────────────────────────────────────────┤
│   类型参数   │   含义                                       │
├──────────────┼──────────────────────────────────────────────┤
│   T          │ Type (通用类型)                              │
│   E          │ Element (集合元素)                           │
│   K          │ Key (Map 的键)                               │
│   V          │ Value (Map 的值)                             │
│   N          │ Number (数字)                                │
│   R          │ Result (返回值)                              │
│   S, U, V    │ 第 2、3、4 个类型                            │
└──────────────┴──────────────────────────────────────────────┘
```

## 泛型的好处

```
┌─────────────────────────────────────────────────────────────┐
│                    泛型的好处                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   1. 类型安全                                                │
│   ┌─────────────────────────────────────────────────────┐  │
│   │  List<String> list = new ArrayList<>();              │  │
│   │  list.add(123);  // 编译错误，提前发现问题           │  │
│   └─────────────────────────────────────────────────────┘  │
│                                                             │
│   2. 消除强制转换                                            │
│   ┌─────────────────────────────────────────────────────┐  │
│   │  // 无泛型                                           │  │
│   │  String s = (String) list.get(0);                    │  │
│   │  // 有泛型                                           │  │
│   │  String s = list.get(0);  // 自动推断                │  │
│   └─────────────────────────────────────────────────────┘  │
│                                                             │
│   3. 代码复用                                                │
│   ┌─────────────────────────────────────────────────────┐  │
│   │  public class Box<T> { ... }                         │  │
│   │  Box<String> stringBox;                              │  │
│   │  Box<Integer> intBox;                                │  │
│   │  // 一套代码，多种类型                               │  │
│   └─────────────────────────────────────────────────────┘  │
│                                                             │
│   4. 增强 API 设计                                           │
│   ┌─────────────────────────────────────────────────────┐  │
│   │  // 编译器知道返回类型，IDE 提示更准确              │  │
│   │  Optional<User> findById(Long id);                   │  │
│   └─────────────────────────────────────────────────────┘  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 面试回答

### 30秒版本

> 泛型是**参数化类型**，将类型作为参数传递。三大作用：1）**类型安全**：编译时检查类型，避免运行时 ClassCastException；2）**消除强转**：取出元素无需手动转换；3）**代码复用**：一套代码处理多种类型。泛型信息只在编译期存在，运行时被擦除（类型擦除）。

### 1分钟版本

> **定义**：参数化类型，类型作为参数
>
> **没有泛型的问题**：
> - 可以放任何类型
> - 取出需要强制转换
> - 运行时才发现类型错误
>
> **泛型的好处**：
> - 类型安全：编译时检查
> - 消除强转：自动类型推断
> - 代码复用：一套代码多种类型
>
> **使用形式**：
> - 泛型类：`class Box<T>`
> - 泛型接口：`interface Comparable<T>`
> - 泛型方法：`<T> T getFirst(List<T>)`
>
> **命名约定**：
> - T=Type, E=Element, K=Key, V=Value

---

*关联文档：[generics-erasure.md](generics-erasure.md) | [generics-bounds.md](generics-bounds.md)*
