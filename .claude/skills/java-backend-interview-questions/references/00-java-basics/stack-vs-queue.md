# 栈和队列在 Java 中的区别是什么？

## 核心区别

```
┌─────────────────────────────────────────────────────────────┐
│                    栈 vs 队列                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   栈 (Stack):                                                │
│   ┌─────────────┐                                           │
│   │     出 ↑    │  LIFO (Last In First Out)                 │
│   │    ┌───┐    │  后进先出                                 │
│   │    │ C │ ←── 栈顶 (最后放入，最先取出)                  │
│   │    ├───┤    │                                           │
│   │    │ B │    │                                           │
│   │    ├───┤    │                                           │
│   │    │ A │ ←── 栈底                                       │
│   │    └───┘    │                                           │
│   │     入 ↑    │                                           │
│   └─────────────┘                                           │
│                                                             │
│   队列 (Queue):                                              │
│   ┌─────────────────────────────────────┐                   │
│   │  出 ← ┌───┬───┬───┐ ← 入            │                   │
│   │       │ A │ B │ C │                 │  FIFO             │
│   │       └───┴───┴───┘                 │  First In First Out │
│   │       队头        队尾              │  先进先出          │
│   └─────────────────────────────────────┘                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## Java 实现类

```
┌─────────────────────────────────────────────────────────────┐
│                    Java 中的实现                             │
├──────────────────┬──────────────────────────────────────────┤
│   数据结构       │   实现类                                 │
├──────────────────┼──────────────────────────────────────────┤
│   栈 (Stack)     │ Deque 接口:                              │
│                  │ • ArrayDeque (推荐)                      │
│                  │ • LinkedList                             │
│                  │ • Stack 类 (不推荐，已过时)              │
├──────────────────┼──────────────────────────────────────────┤
│   队列 (Queue)   │ Queue 接口:                              │
│                  │ • LinkedList                             │
│                  │ • ArrayDeque                             │
│                  │ • PriorityQueue (优先队列)               │
│                  │ • ConcurrentLinkedQueue (并发)           │
├──────────────────┼──────────────────────────────────────────┤
│   阻塞队列       │ BlockingQueue 接口:                      │
│                  │ • ArrayBlockingQueue                     │
│                  │ • LinkedBlockingQueue                    │
│                  │ • PriorityBlockingQueue                  │
└──────────────────┴──────────────────────────────────────────┘
```

## 代码示例

### 栈操作

```java
// 推荐使用 Deque 作为栈
Deque<Integer> stack = new ArrayDeque<>();

// 入栈
stack.push(1);
stack.push(2);
stack.push(3);

// 查看栈顶 (不移除)
int top = stack.peek();  // 3

// 出栈
int value = stack.pop();  // 3
value = stack.pop();      // 2
value = stack.pop();      // 1

// 判空
boolean isEmpty = stack.isEmpty();

// ❌ 不推荐: Stack 类 (继承自 Vector，性能差)
Stack<Integer> oldStack = new Stack<>();
```

### 队列操作

```java
// 普通队列
Queue<Integer> queue = new LinkedList<>();

// 入队
queue.offer(1);  // 推荐用 offer，失败返回 false
queue.offer(2);
queue.offer(3);

// 查看队头 (不移除)
int head = queue.peek();  // 1

// 出队
int value = queue.poll();  // 1 (推荐用 poll，空队列返回 null)
value = queue.poll();      // 2

// add() 和 remove() 失败会抛异常
// offer() 和 poll() 失败返回特殊值
```

### 双端队列

```java
// Deque 可同时作为栈和队列
Deque<Integer> deque = new ArrayDeque<>();

// 作为栈 (操作同一端)
deque.push(1);     // 等同于 addFirst
deque.pop();       // 等同于 removeFirst

// 作为队列 (两端操作)
deque.offerLast(1);   // 队尾入队
deque.pollFirst();    // 队头出队

// 双端操作
deque.addFirst(1);    // 头部添加
deque.addLast(2);     // 尾部添加
deque.removeFirst();  // 头部移除
deque.removeLast();   // 尾部移除
```

## 应用场景

```
┌─────────────────────────────────────────────────────────────┐
│                    应用场景                                  │
├──────────────────┬──────────────────────────────────────────┤
│   栈             │   队列                                   │
├──────────────────┼──────────────────────────────────────────┤
│ • 函数调用栈     │ • 消息队列                               │
│ • 表达式求值     │ • 任务调度                               │
│ • 括号匹配       │ • BFS 广度优先搜索                       │
│ • 浏览器前进后退 │ • 缓冲区                                 │
│ • 撤销操作       │ • 打印任务队列                           │
│ • DFS 深度优先   │ • 线程池任务队列                         │
└──────────────────┴──────────────────────────────────────────┘
```

## 对比总结

```
┌─────────────────────────────────────────────────────────────┐
│                    对比总结                                  │
├──────────────────┬──────────────────┬───────────────────────┤
│   特性           │   栈 (Stack)     │   队列 (Queue)        │
├──────────────────┼──────────────────┼───────────────────────┤
│   顺序           │ LIFO 后进先出    │ FIFO 先进先出         │
│   操作端         │ 单端操作         │ 两端操作              │
│   核心操作       │ push/pop/peek    │ offer/poll/peek       │
│   推荐实现       │ ArrayDeque       │ LinkedList/ArrayDeque │
│   典型应用       │ 递归、撤销       │ 任务队列、BFS         │
└──────────────────┴──────────────────┴───────────────────────┘
```

## 面试回答

### 30秒版本

> **栈**是 LIFO（后进先出），单端操作，用于函数调用、表达式求值、DFS。**队列**是 FIFO（先进先出），两端操作，用于任务队列、BFS。Java 中栈推荐用 **ArrayDeque**（不推荐 Stack 类），队列用 **LinkedList** 或 **ArrayDeque**。阻塞队列用 BlockingQueue。

### 1分钟版本

> **核心区别**：
> - 栈：LIFO 后进先出，单端操作
> - 队列：FIFO 先进先出，两端操作
>
> **Java 实现**：
> - 栈：ArrayDeque（推荐），Stack 类已过时
> - 队列：LinkedList、ArrayDeque
> - 阻塞队列：ArrayBlockingQueue 等
>
> **核心方法**：
> - 栈：push/pop/peek
> - 队列：offer/poll/peek
>
> **应用场景**：
> - 栈：函数调用、括号匹配、DFS
> - 队列：任务队列、消息队列、BFS

---

*关联文档：[array-vs-linkedlist.md](../06-data-structure/array-vs-linkedlist.md)*
